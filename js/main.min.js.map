{"version":3,"sources":["main.js"],"names":["animateItems","intro","document","getElementById","services","querySelectorAll","awards","getElementsByClassName","inViewport","classList","add","remove","i","length","setContentTopMargin","style","marginTop","clientHeight","element","padding","undefined","boundingBox","getBoundingClientRect","windowHeight","documentElement","topLimit","bottomLimit","top","bottom","closeMenu","event","container","target","isChild","node","parent","parentNode","window","addEventListener","iOS","test","navigator","userAgent","MSStream","fixedBgElements","backgroundAttachment","map","e","preventDefault"],"mappings":"CAAA,WACA,YAuEA,SAAAA,KAEA,GAAAC,GAAAC,SAAAC,eAAA,iBACAC,EAAAF,SAAAG,iBAAA,sBACAC,EAAAJ,SAAAK,uBAAA,SAYA,IATAN,IACAO,EAAAP,EAAA,KACAA,EAAAQ,UAAAC,IAAA,WAEAT,EAAAQ,UAAAE,OAAA,YAKAP,EACA,IAAA,GAAAQ,GAAA,EAAAA,EAAAR,EAAAS,SAAAD,EACAJ,EAAAJ,EAAAQ,GAAA,IACAR,EAAAQ,GAAAH,UAAAC,IAAA,WAEAN,EAAAQ,GAAAH,UAAAE,OAAA,UAMA,IAAAL,EACA,IAAA,GAAAM,GAAA,EAAAA,EAAAN,EAAAO,SAAAD,EACAJ,EAAAF,EAAAM,GAAA,IACAN,EAAAM,GAAAH,UAAAC,IAAA,WAEAJ,EAAAM,GAAAH,UAAAE,OAAA,WAUA,QAAAG,KAEAZ,SAAAC,eAAA,WAAAY,MAAAC,UACAd,SAAAC,eAAA,YAAAc,aAAA,KAOA,QAAAT,GAAAU,EAAAC,GAEA,GAAAC,QAAAF,EACA,OAAA,CAGAC,GAAAA,GAAA,CACA,IAAAE,GAAAH,EAAAI,wBACAC,EAAArB,SAAAsB,gBAAAP,aACAQ,EAAAN,EACAO,EAAAH,EAAAJ,CAEA,QAAAE,EAAAM,IAAAF,GAAAJ,EAAAO,OAAAH,KACAJ,EAAAM,IAAAD,GAAAL,EAAAO,OAAAF,IACA,EAFA,OAcA,QAAAG,GAAAC,GAGA,GAAAC,GAAA7B,SAAAC,eAAA,kBAEA,OAAA4B,GAIAD,EAAAE,SAAAD,GAAAE,EAAAH,EAAAE,OAAAD,IACA,MAGA7B,UAAAK,uBAAA,oBAAA,GAAAE,UAAAE,OAAA,SAPA,EAkBA,QAAAsB,GAAAC,EAAAC,GAEA,KAAA,OAAAD,EAAAE,YAAA,CACA,GAAAF,IAAAC,EACA,OAAA,CAGAD,GAAAA,EAAAE,WAGA,OAAA,EArLAC,OAAAC,iBAAA,mBAAA,YAGA,WAEA,GAAAC,GAAA,yBAAAC,KAAAC,UAAAC,aAAAL,OAAAM,QAGA,IAAAJ,EAAA,CACA,GAAAK,GAAA1C,SAAAK,uBAAA,WAEA,IAAAa,QAAAwB,EACA,IAAA,GAAAhC,GAAA,EAAAA,EAAAgC,EAAA/B,SAAAD,EACAgC,EAAAhC,GAAAG,MAAA8B,qBAAA,aAOA3C,SAAAoC,iBAAA,QAAA,WACA,GAAAQ,GAAA5C,SAAAC,eAAA,aAEA,OAAAiB,SAAA0B,GACA,MAGA5C,UAAAC,eAAA,cAAAM,UAAAE,OAAA,eAKAT,SAAAK,uBAAA,aAAA,GACA+B,iBAAA,QAAA,SAAAS,GACA7C,SAAAK,uBAAA,oBAAA,GAAAE,UAAAC,IAAA,UAKAR,SAAAK,uBAAA,cAAA,GACA+B,iBAAA,QAAA,SAAAS,GACAA,EAAAC,iBACA9C,SAAAK,uBAAA,oBAAA,GAAAE,UAAAE,OAAA,UAIAT,SAAAoC,iBAAA,QAAA,WACA,GAAAQ,GAAA5C,SAAAC,eAAA,aAEA,OAAAiB,SAAA0B,GACA,MAGA5C,UAAAC,eAAA,cAAAM,UAAAE,OAAA,eAGAG,MAIAuB,OAAAC,iBAAA,SAAAxB,GACAZ,SAAAoC,iBAAA,QAAAT,GACA3B,SAAAoC,iBAAA,aAAAT,GACA3B,SAAAoC,iBAAA,SAAAtC","file":"main.min.js","sourcesContent":["(function () {\n    'use strict';\n\n    window.addEventListener('DOMContentLoaded', function () {\n\n        // iOS-specific functionality.\n        (function() {\n            // Get a flag telling us if this is an iOS device.\n            var iOS = /iPad|iPhone|iPod|CriOS/.test(navigator.userAgent) && !window.MSStream;\n\n            // Change fixed background to scroll.\n            if (iOS) {\n                var fixedBgElements = document.getElementsByClassName('fixed-bg');\n\n                if (fixedBgElements != undefined) {\n                    for (var i = 0; i < fixedBgElements.length; ++i) {\n                        fixedBgElements[i].style.backgroundAttachment = 'scroll';\n                    }\n                }\n            }\n        })();\n\n        // Disable the google map iframe from capturing scroll until clicked.\n        document.addEventListener('click', function() {\n            var map = document.getElementById('google-map');\n\n            if(map == undefined) {\n                return true;\n            }\n\n            document.getElementById('google-map').classList.remove('scrolloff');\n        });\n\n\n        // Small screen menu open\n        document.getElementsByClassName('menu-open')[0]\n            .addEventListener('click', function(e) {\n                document.getElementsByClassName('main-nav-wrapper')[0].classList.add('open');\n            });\n\n\n        // Small screen menu close \n        document.getElementsByClassName('menu-close')[0]\n            .addEventListener('click', function(e) {\n                e.preventDefault();\n                document.getElementsByClassName('main-nav-wrapper')[0].classList.remove('open');\n            });\n\n        // Disable the google map iframe from capturing scroll until clicked.\n        document.addEventListener('click', function() {\n            var map = document.getElementById('google-map');\n\n            if(map == undefined) {\n                return true;\n            }\n\n            document.getElementById('google-map').classList.remove('scrolloff');\n        });\n\n        setContentTopMargin();\n    });\n\n\n    window.addEventListener('resize', setContentTopMargin);\n    document.addEventListener( 'click', closeMenu);\n    document.addEventListener( 'touchstart', closeMenu);\n    document.addEventListener( 'scroll', animateItems );\n\n\n    /**\n     * Animate items in viewport.\n     */\n    function animateItems()\n    {\n        var intro = document.getElementById('intro-section');\n        var services = document.querySelectorAll('.services .links a');\n        var awards = document.getElementsByClassName('plaque');\n\n        // Animate the intro block\n        if (intro) {\n            if ( inViewport( intro, 300 ) ) {\n                intro.classList.add('animate');\n            } else {\n                intro.classList.remove('animate');\n            }\n        }\n\n        // Animate the services links\n        if (services) {\n            for (var i = 0; i < services.length; ++i) {\n                if ( inViewport( services[i], 50 ) ) {\n                    services[i].classList.add('animate');\n                } else {\n                    services[i].classList.remove('animate');\n                }\n            }\n        }\n\n        // Animate the awards\n        if (awards) {\n            for (var i = 0; i < awards.length; ++i) {\n                if ( inViewport( awards[i], 50 ) ) {\n                    awards[i].classList.add('animate');\n                } else {\n                    awards[i].classList.remove('animate');\n                }\n            }\n        }\n    }\n\n    /**\n     * Add enough margin to the content to push it below the header\n     * since the header is fixed.\n     */\n    function setContentTopMargin()\n    {\n        document.getElementById('content').style.marginTop =\n            document.getElementById('masthead').clientHeight + 'px';\n    }\n\n\n    /**\n     * Check if an element is within the window viewport.\n     */\n    function inViewport(element, padding)\n    {\n        if(element == undefined) {\n            return false;\n        }\n\n        padding = padding || 0;\n        var boundingBox = element.getBoundingClientRect();\n        var windowHeight = document.documentElement.clientHeight;\n        var topLimit = padding;\n        var bottomLimit = windowHeight - padding;\n\n        if ( ( boundingBox.top > topLimit || boundingBox.bottom > topLimit ) &&\n                ( boundingBox.top < bottomLimit || boundingBox.bottom < bottomLimit ) ) {\n            return true;\n        }\n\n    }\n\n\n    /**\n     *  Close the the main nav if clicking or tapping outside of the nav on small screens.\n     *\n     * @param event\n     * @returns {boolean}\n     */\n    function closeMenu(event)\n    {\n        //var container = document.getElementById( 'site-navigation' );\n        var container = document.getElementById('site-navigation');\n        \n        if ( ! container ) {\n            return false;\n        }\n        \n        if( event.target === container || isChild( event.target, container )) {\n            return false;\n        }\n\n        document.getElementsByClassName('main-nav-wrapper')[0].classList.remove('open');\n    }\n\n\n    /**\n     * Is the given node a child of the supplied parent?\n     *\n     * @param node\n     * @param parent\n     * @returns {boolean}\n     */\n    function isChild(node, parent)\n    {\n        while ( node.parentNode !== null ) {\n            if ( node === parent ) {\n                return true;\n            }\n\n            node = node.parentNode;\n        }\n\n        return false;\n    }\n\n})();\n"],"sourceRoot":"/source/"}